# DART API 연간보고서 재무제표 데이터 구조 분석 결과

## 개요
삼성전자(005930)의 2024년 연간보고서 재무제표 데이터를 실제로 조회하여 데이터 구조를 분석한 결과입니다.

## API 호출 정보
- **엔드포인트**: `fnlttSinglAcnt.json` (단일회사 전체 재무제표)
- **파라미터**:
  - `corp_code`: 00126380 (삼성전자 고유번호)
  - `bsns_year`: 2024 (사업연도)
  - `reprt_code`: 11011 (사업보고서)
  - `fs_div`: CFS (연결재무제표) 또는 OFS (별도재무제표)

## 응답 데이터 구조

### 1. 응답 형식
- **전체 구조**: JSON 배열 (`list` 필드)
- **총 계정 항목 수**: 28개 (연결 + 별도 혼합)

### 2. 각 항목의 필드 구조

```json
{
  "rcept_no": "20250311001085",           // 접수번호 (14자리)
  "reprt_code": "11011",                  // 보고서 코드
  "bsns_year": "2024",                    // 사업연도
  "corp_code": "00126380",                // 기업 고유번호 (8자리)
  "stock_code": "005930",                 // 종목코드 (6자리)
  "fs_div": "CFS",                        // 재무제표 구분 (CFS: 연결, OFS: 별도)
  "fs_nm": "연결재무제표",                 // 재무제표 구분명
  "sj_div": "BS",                         // 재무제표 유형 (BS: 재무상태표, IS: 손익계산서, CF: 현금흐름표)
  "sj_nm": "재무상태표",                   // 재무제표 유형명
  "account_nm": "자산총계",                // 계정명 (매핑 시 사용)
  "thstrm_nm": "제 56 기",                 // 당기명
  "thstrm_dt": "2024.12.31 현재",         // 당기일자
  "thstrm_amount": "514,531,948,000,000", // 당기금액 (쉼표 포함 문자열)
  "frmtrm_nm": "제 55 기",                 // 전기명
  "frmtrm_dt": "2023.12.31 현재",         // 전기일자
  "frmtrm_amount": "455,905,980,000,000", // 전기금액
  "bfefrmtrm_nm": "제 54 기",              // 전전기명
  "bfefrmtrm_dt": "2022.12.31 현재",      // 전전기일자
  "bfefrmtrm_amount": "448,424,507,000,000", // 전전기금액
  "ord": "5",                             // 순서
  "currency": "KRW"                       // 통화 (원화)
}
```

### 3. 주요 필드 설명

| 필드명 | 설명 | 예시 |
|--------|------|------|
| `account_nm` | 계정명 (매핑에 사용) | "자산총계", "당기순이익(손실)" |
| `sj_div` | 재무제표 구분 | "BS" (재무상태표), "IS" (손익계산서), "CF" (현금흐름표) |
| `fs_div` | 연결/별도 구분 | "CFS" (연결), "OFS" (별도) |
| `thstrm_amount` | 당기금액 (쉼표 포함 문자열) | "514,531,948,000,000" |
| `frmtrm_amount` | 전기금액 | "455,905,980,000,000" |
| `bfefrmtrm_amount` | 전전기금액 | "448,424,507,000,000" |

## 재무제표 구분별 데이터 분포

### 삼성전자 2024년 사업보고서 기준
- **재무상태표 (BS)**: 18개 항목
- **손익계산서 (IS)**: 10개 항목
- **현금흐름표 (CF)**: ❌ 이 API에서는 제공되지 않음 (XBRL 파싱 필요)

## 필요한 계정명 매핑 현황

### ✅ 직접 매핑 가능한 계정
1. **자산총계**
   - 계정명: "자산총계"
   - 재무제표: BS (재무상태표)

2. **자본총계** (자기자본총계)
   - 계정명: "자본총계"
   - 재무제표: BS (재무상태표)
   - 참고: "자기자본총계"가 아닌 "자본총계"로 표시됨

3. **당기순이익**
   - 계정명: "당기순이익(손실)"
   - 재무제표: IS (손익계산서)
   - 참고: 손실 포함 표기

4. **영업이익**
   - 계정명: "영업이익"
   - 재무제표: IS (손익계산서)

5. **유동부채**
   - 계정명: "유동부채"
   - 재무제표: BS (재무상태표)

### ⚠️ 추가 작업 필요 계정

1. **CFO (영업활동현금흐름)**
   - ❌ 이 API에서는 제공되지 않음
   - ✅ XBRL 파싱 필요
   - 계정명 예상: "영업활동으로 인한 현금흐름", "영업활동현금흐름"

2. **이자비용**
   - ❌ 단일 계정으로 명시되지 않음
   - 손익계산서 상세 항목에서 확인 필요 또는 XBRL 파싱

3. **유형자산 취득**
   - ❌ 단일 계정으로 명시되지 않음
   - XBRL 파싱 또는 보조부 확인 필요

4. **무형자산 취득**
   - ❌ 단일 계정으로 명시되지 않음
   - XBRL 파싱 또는 보조부 확인 필요

5. **이자부유동부채**
   - ❌ "유동부채" 전체로만 제공됨
   - 상세 분류는 재무상태표 주석 또는 XBRL 파싱 필요

## 실제 계정명 샘플 (2024년 삼성전자)

### 재무상태표 (BS)
- 유동자산
- 비유동자산
- 자산총계 ✅
- 유동부채 ✅
- 비유동부채
- 부채총계
- 자본금
- 이익잉여금
- 자본총계 ✅

### 손익계산서 (IS)
- 매출액
- 영업이익 ✅
- 법인세차감전 순이익
- 당기순이익(손실) ✅
- 총포괄손익

## 금액 형식

- **형식**: 쉼표 포함 문자열
- **예시**: `"514,531,948,000,000"` (514조 5319억 4800만 원)
- **처리 필요**: 숫자 변환 시 쉼표 제거 후 `int()` 변환

## 주의사항

1. **연결/별도 혼합**: 하나의 API 응답에 연결재무제표와 별도재무제표가 함께 포함될 수 있음
   - `fs_div` 필드로 구분 필요
   - 연결재무제표(CFS) 우선 사용 권장

2. **계정명 변형**: 같은 계정도 약간의 변형이 있을 수 있음
   - 예: "당기순이익" vs "당기순이익(손실)"
   - 매핑 테이블에 변형 포함 필요

3. **현금흐름표 부재**: 이 API(`fnlttSinglAcnt.json`)에서는 현금흐름표 데이터를 제공하지 않음
   - CFO 등 현금흐름 관련 데이터는 XBRL 파일 파싱 필요

4. **상세 항목 부재**: 
   - 이자비용, 유형자산 취득, 무형자산 취득 등 상세 항목은 단일 계정으로 제공되지 않음
   - XBRL 파일 파싱 또는 다른 API 엔드포인트 확인 필요

## 다음 단계

1. ✅ 기본 계정명 매핑 구현 (자산총계, 자본총계, 당기순이익, 영업이익, 유동부채)
2. ⚠️ XBRL 파싱 로직 구현 (CFO, 이자비용, 유형자산 취득, 무형자산 취득 등)
3. ⚠️ 계정명 매핑 테이블 확장 (실제 응답 기반 변형 추가)

## 참고 파일

- 실제 응답 데이터: `dart_2024_financial_data.json` (프로젝트 루트)
- 테스트 스크립트: `test_dart_api.py`, `analyze_dart_data_detail.py`

