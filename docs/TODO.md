# TODO 리스트

## DART API 데이터 수집

### 1. 재무제표 데이터 수집 (최근 5년)
다음 데이터를 DART API에서 가져와야 합니다:

#### 필수 수집 데이터
1. **유형자산 취득** (재무제표)
2. **무형자산 취득** (재무제표)
3. **CFO (영업활동현금흐름)** (현금흐름표)
4. **당기순이익** (손익계산서)
5. **영업이익** (손익계산서)
6. **이자비용** (손익계산서)
7. **자산총계** (재무상태표)
8. **유동부채** (재무상태표)
9. **이자부유동부채** (재무상태표)

### 2. 계산해야 할 지표

#### FCF (Free Cash Flow, 자유현금흐름)
- **계산식**: CFO - (유형자산 취득 + 무형자산 취득)
- **필요 데이터**: CFO, 유형자산 취득, 무형자산 취득

#### ICR (Interest Coverage Ratio, 이자보상비율)
- **계산식**: 영업이익 / 이자비용
- **필요 데이터**: 영업이익, 이자비용
- **단위**: ratio (배수)

#### ROIC (Return on Invested Capital, 투하자본수익률)
- **계산식**: 영업이익 / (자산총계 - 비이자성유동부채)
- **비이자성유동부채**: 유동부채 - 이자부유동부채
- **필요 데이터**: 영업이익, 자산총계, 유동부채, 이자부유동부채
- **단위**: % (백분율)

#### WACC (Weighted Average Cost of Capital, 가중평균자본비용)
- **계산식**: 간소화 버전
  - 채권 수익률 (국채 5년, ECOS에서 수집)
  - 베타: 1 고정
  - MRP (Market Risk Premium): 5% 고정
- **필요 데이터**: 채권 수익률 (ECOS)
- **단위**: % (백분율)

## 구현 작업

### 단계 1: DART API 클라이언트 확장
- [ ] 재무제표 조회 API 메서드 추가 (`get_financial_statement`)
- [ ] 손익계산서 조회 API 메서드 추가
- [ ] 현금흐름표 조회 API 메서드 추가
- [ ] 재무상태표 조회 API 메서드 추가

### 단계 2: DartDataService 구현
- [ ] `collect_financial_data()` 메서드 구현
  - 최근 5년 연간 보고서 다운로드
  - 각 보고서를 `FinancialStatementData` 객체로 변환
  - O(1) 조회를 위한 인덱싱 구현
- [ ] 필요한 계정 데이터 추출 로직 구현
  - 유형자산 취득
  - 무형자산 취득
  - CFO
  - 당기순이익
  - 영업이익
  - 이자비용
  - 자산총계
  - 유동부채
  - 이자부유동부채

### 단계 3: 지표 계산 로직 구현
- [ ] FCF 계산 로직
- [ ] ICR 계산 로직
- [ ] ROIC 계산 로직
- [ ] WACC 계산 로직 (ECOS 데이터 연동)

### 단계 4: DataOrchestrator 구현
- [ ] `collect_company_data()` 메서드 구현
  - DART 데이터 수집
  - ECOS 데이터 수집 (국채 5년 수익률)
  - `CompanyFinancialObject` 객체 생성 및 채우기
  - 모든 지표 계산 및 저장

### 단계 5: API 엔드포인트 추가
- [ ] 회사 재무 데이터 조회 API
- [ ] 특정 연도 재무제표 조회 API
- [ ] 지표 계산 결과 조회 API

## 참고사항

### DART API 문서
- OpenDART API: https://opendart.fss.or.kr/guide/main.do
- 재무제표 조회: 사업보고서 (reprt_code: 11011)
- 재무제표 구분: 연결재무제표 (CFS) 또는 별도재무제표 (OFS)

### 데이터 저장 전략
- 현재는 객체 기반으로 데이터 저장
- 모든 데이터 수집 완료 후 DB 스키마 설계 및 마이그레이션 예정

